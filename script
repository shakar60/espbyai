-- Configuration
local HighlightColor = Color3.fromRGB(255, 0, 0) -- Red color for highlighting
local Transparency = 0.7 -- Transparency of the highlight
local Thickness = 0.1 -- Thickness of the highlight

-- Function to create an ESP for a specific body part of a player
local function createBodyPartESP(player, bodyPart)
    -- Check if the player has a character and humanoid
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        local part = character:FindFirstChild(bodyPart)
        if part then
            -- Create a box outline for the body part
            local outline = Instance.new("BoxHandleAdornment")
            outline.Name = "ESP_" .. bodyPart
            outline.Size = part.Size * 1.1 -- Slightly larger size for visibility
            outline.Adornee = part
            outline.Color3 = HighlightColor
            outline.Transparency = Transparency
            outline.Thickness = Thickness
            outline.AlwaysOnTop = true
            outline.Parent = part

            -- Connect to the player removing event
            player.CharacterRemoving:Connect(function()
                outline:Destroy()
            end)
        end
    end
end

-- Function to create ESP for all body parts of a player
local function createPlayerESP(player)
    createBodyPartESP(player, "Head")
    createBodyPartESP(player, "Torso")
    createBodyPartESP(player, "RightLeg")
    createBodyPartESP(player, "LeftLeg")
    createBodyPartESP(player, "RightArm")
    createBodyPartESP(player, "LeftArm")
end

-- Function to initialize ESP for all existing players
local function initESP()
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            createPlayerESP(player)
        end
    end
end

-- Initialize ESP for existing players
initESP()

-- Connect to player added event to initialize ESP for new players
game.Players.PlayerAdded:Connect(function(player)
    if player ~= game.Players.LocalPlayer then
        createPlayerESP(player)
    end
end)
