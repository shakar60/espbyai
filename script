-- Configuration
local HighlightColor = Color3.fromRGB(255, 0, 0) -- Red color for highlighting
local OutlineColor = Color3.fromRGB(255, 255, 255) -- White color for outline
local NameTextColor = Color3.fromRGB(0, 0, 0) -- Black color for name text
local NameTextSize = 14 -- Size of the player's name (medium size)

-- Function to create the highlight for a player
local function createHighlight(player)
    -- Check if the player has a character and humanoid
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local head = character:FindFirstChild("Head")

        if humanoid and head then
            -- Create a box outline for the player's character
            local boxOutline = Instance.new("SelectionBox")
            boxOutline.Name = "BoxOutline"
            boxOutline.Adornee = character
            boxOutline.Color3 = OutlineColor
            boxOutline.LineThickness = 0.2 -- Slightly bigger outline
            boxOutline.SurfaceTransparency = 1
            boxOutline.Parent = character

            -- Create a part for the player's name
            local namePart = Instance.new("Part")
            namePart.Name = "NamePart"
            namePart.Size = Vector3.new(0, 0, 0)
            namePart.Anchored = true
            namePart.CanCollide = false
            namePart.Transparency = 1
            namePart.Parent = character

            -- Create a billboard GUI for the player's name
            local billboard = Instance.new("BillboardGui")
            billboard.Name = "NameTag"
            billboard.Size = UDim2.new(0, 150, 0, 30) -- Slightly bigger size
            billboard.StudsOffset = Vector3.new(0, 2, 0) -- Offset the name tag slightly above the player's head
            billboard.Parent = namePart

            local nameLabel = Instance.new("TextLabel")
            nameLabel.Name = "NameLabel"
            nameLabel.Size = UDim2.new(1, 0, 1, 0)
            nameLabel.BackgroundTransparency = 1
            nameLabel.TextColor3 = NameTextColor
            nameLabel.Text = player.Name
            nameLabel.Font = Enum.Font.SourceSansBold
            nameLabel.TextSize = NameTextSize
            nameLabel.Parent = billboard

            -- Place the name part within the box outline
            namePart.Parent = boxOutline
        end
    end
end

-- Function to initialize highlights for all existing players
local function initHighlights()
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            createHighlight(player)
        end
    end
end

-- Initialize highlights for existing players
initHighlights()

-- Connect to player added event to initialize highlights for new players
game.Players.PlayerAdded:Connect(function(player)
    if player ~= game.Players.LocalPlayer then
        createHighlight(player)
    end
end)
